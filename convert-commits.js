import { execSync } from 'child_process';

// 簡繁轉換對照
const s2tMap = {
  // 常用詞彙轉換
  '用于': '用於',

  '转换': '轉換',
  '基础': '基礎',
  '项目': '專案',
  '结构': '結構',
  '配置': '配置',
  '文件': '檔案',
  '状态': '狀態',
  '请求': '請求',
  '功能': '功能',
  '模块': '模組',
  '实现': '實作',
  '登录': '登入',
  '首页': '首頁',
  '关于': '關於',
  '代码': '程式碼',
  '规范': '規範',
  '工具': '工具',
  '基础': '基礎', '结构': '結構', '状态': '狀態', '类型': '類型', '名称': '名稱', '版本': '版本',
  '事件': '事件', '属性': '屬性', '方法': '方法', '实现登录': '實現登入',
  '首页': '首頁', '关于': '關於', '基础页面': '基礎頁面', '规范': '規範', '优化': '優化', '用户': '用戶', '存储': '存儲', '并': '並', '按钮': '按鈕',
  '组件': '組件', '重构': '重構', '旧': '舊', '请求': '請求', '工具': '工具', '代码': '程式碼',
  '项目': '專案', '框架': '框架', '文件': '檔案', '设置': '設定', '信息': '資訊',
  '登录': '登入', '注册': '註冊', '测试': '測試', '开发': '開發', '发布': '發布',
  '配置': '設定', '参数': '參數', '注释': '註解', '错误': '錯誤',
  '优化': '優化',
  '用户': '用戶',
  '存储': '存儲',
  '并': '並',
  '按钮': '按鈕',
  '组件': '組件',
  '重构': '重構',
  '旧': '舊',
  '请求': '請求',
  '工具': '工具',
  '移动端': '移動端',
  '项目': '專案',
  '框架': '框架',
  '文件': '檔案',
  '设置': '設定',
  '信息': '資訊',
  '登录': '登入',
  '注册': '註冊',
  '测试': '測試',
  '开发': '開發',
  '发布': '發布',
  '配置': '設定',
  '参数': '參數',
  '代码': '程式碼',
  '注释': '註解',
  '错误': '錯誤',
  '警告': '警告',
  '成功': '成功',
  '失败': '失敗',
  '加载': '載入',
  '保存': '儲存',
  '删除': '刪除',
  '更新': '更新',
  '创建': '建立',
  '修改': '修改',
  '提交': '提交',
  '获取': '取得',
  '添加': '新增',
  '移除': '移除',
  '支持': '支援',
  '解决': '解決',
  '问题': '問題',
  '功能': '功能',
  '性能': '效能',
  '优化': '最佳化',
  '修复': '修復',
  '合并': '合併',
  '分支': '分支',
  '冲突': '衝突',
  '回滚': '還原',
  '版本': '版本',
  '发布': '發布',
  '部署': '部署',
  '服务器': '伺服器',
  '客户端': '用戶端',
  '网络': '網路',
  '连接': '連線',
  '数据': '資料',
  '数据库': '資料庫',
  '缓存': '快取',
  '日志': '日誌',
  '调试': '除錯',
  '接口': '介面',
  '类型': '型別',
  '实例': '實例',
  '对象': '物件',
  '数组': '陣列',
  '字符串': '字串',
  '布尔': '布林',
  '函数': '函式',
  '变量': '變數',
  '常量': '常數',
  '异步': '非同步',
  '同步': '同步',
  '回调': '回呼',
  '事件': '事件',
  '监听': '監聽',
  '触发': '觸發',
  '状态': '狀態',
  '属性': '屬性',
  '方法': '方法',
  '继承': '繼承',
  '封装': '封裝',
  '多态': '多型',
  '抽象': '抽象',
  '接口': '介面',
  '实现': '實作',
  '重载': '多載',
  '重写': '覆寫',
  '导入': '匯入',
  '导出': '匯出',
  '模块': '模組',
  '包': '套件',
  '依赖': '相依',
  '安装': '安裝',
  '卸载': '解除安裝',
  '更新': '更新',
  '升级': '升級',
  '降级': '降級',
  '回退': '還原',
  '提交': '提交',
  '推送': '推送',
  '拉取': '拉取',
  '简繁': '簡繁',
  '转换': '轉換',
  '工具': '工具', // 無需轉換
  '用于': '用於',
  '修改': '修改', // 無需轉換
  '提交': '提交', // 無需轉換
  '信息': '資訊', // 若你需要轉為台灣用語可改為「資訊」
  '克隆': '複製',
  '项目': '專案',
  '基础': '基礎',
  '结构': '結構',
  '配置': '配置',
  '文件': '檔案',
  '状态': '狀態',
  '请求': '請求',
  '功能': '功能',
  '模块': '模組',
  '实现': '實作',
  '登录': '登入',
  '首页': '首頁',
  '关于': '關於',
  '代码': '程式碼',
  '规范': '規範',
  '工具': '工具',
  '仓库': '儲存庫',
  '分支': '分支',
  '标签': '標籤',
  '合并': '合併',
  '冲突': '衝突',
  '解决': '解決',
  '撤销': '復原',
  '重置': '重設',
  '暂存': '暫存',
  '工作区': '工作目錄',
  '暂存区': '暫存區',
  '版本库': '儲存庫',
  '远程': '遠端',
  '本地': '本機',
  '服务器': '伺服器',
  '客户端': '用戶端',
  '部署': '部署',
  '发布': '發布',
  '构建': '建置',
  '编译': '編譯',
  '打包': '封裝',
  '压缩': '壓縮',
  '解压': '解壓縮',
  '上传': '上傳',
  '下载': '下載',
  '备份': '備份',
  '恢复': '還原',
  '迁移': '移轉',
  '同步': '同步',
  '异步': '非同步',
  '并发': '並行',
  '并行': '平行',
  '线程': '執行緒',
  '进程': '程序',
  '内存': '記憶體',
  '缓存': '快取',
  '磁盘': '磁碟',
  '文件': '檔案',
  '目录': '目錄',
  '路径': '路徑',
  '链接': '連結',
  '符号': '符號',
  '权限': '權限',
  '用户': '使用者',
  '组': '群組',
  '角色': '角色',
  '认证': '驗證',
  '授权': '授權',
  '会话': '工作階段',
  '令牌': '權杖',
  '密码': '密碼',
  '加密': '加密',
  '解密': '解密',
  '哈希': '雜湊',
  '签名': '簽章',
  '证书': '憑證',
  '安全': '安全性',
  '漏洞': '弱點',
  '攻击': '攻擊',
  '防御': '防禦',
  '防火墙': '防火牆',
  '网络': '網路',
  '协议': '協定',
  '端口': '連接埠',
  '域名': '網域名稱',
  'IP地址': 'IP位址',
  '服务器': '伺服器',
  '客户端': '用戶端',
  '请求': '請求',
  '响应': '回應',
  '状态码': '狀態碼',
  '头部': '標頭',
  '主体': '主體',
  '参数': '參數',
  '查询': '查詢',
  '表单': '表單',
  '文件': '檔案',
  '上传': '上傳',
  '下载': '下載',
  '流': '串流',
  '缓冲区': '緩衝區',
  '编码': '編碼',
  '解码': '解碼',
  '格式': '格式',
  '解析': '剖析',
  '序列化': '序列化',
  '反序列化': '反序列化',
  '验证': '驗證',
  '正则': '正則',
  '匹配': '比對',
  '替换': '取代',
  '分割': '分割',
  '连接': '串接',
  '截取': '擷取',
  '查找': '尋找',
  '排序': '排序',
  '过滤': '過濾',
  '映射': '對應',
  '归约': '歸納',
  '迭代': '疊代',
  '递归': '遞迴',
  '回调': '回呼',
  '承诺': '承諾',
  '异步': '非同步',
  '等待': '等待',
  '生成器': '產生器',
  '迭代器': '疊代器',
  '观察者': '觀察者',
  '发布订阅': '發佈訂閱',
  '中间件': '中介軟體',
  '钩子': '鉤子',
  '插件': '外掛',
  '扩展': '擴充',
  '配置': '設定',
  '环境': '環境',
  '开发': '開發',
  '测试': '測試',
  '生产': '正式',
  '部署': '部署',
  '监控': '監控',
  '日志': '日誌',
  '错误': '錯誤',
  '异常': '例外',
  '调试': '除錯',
  '性能': '效能',
  '优化': '最佳化',
  '分析': '剖析',
  '基准': '基準',
  '测试': '測試',
  '单元测试': '單元測試',
  '集成测试': '整合測試',
  '端到端测试': '端對端測試',
  '模拟': '模擬',
  '存根': '樁',
  '模拟对象': '模擬物件',
  '断言': '斷言',
  '覆盖率': '涵蓋率',
  '持续集成': '持續整合',
  '持续部署': '持續部署',
  '持续交付': '持續交付',
  '自动化': '自動化',
  '脚本': '指令碼',
  '命令行': '命令列',
  '终端': '終端機',
  '控制台': '主控台',
  '输出': '輸出',
  '输入': '輸入',
  '标准输入': '標準輸入',
  '标准输出': '標準輸出',
  '标准错误': '標準錯誤',
  '管道': '管線',
  '重定向': '重新導向',
  '通配符': '萬用字元',
  '正则表达式': '正規表示式',
  '转义': '跳脫',
  '编码': '編碼',
  '解码': '解碼',
  '字符集': '字元集',
  'Unicode': '萬國碼',
  'UTF-8': '萬國碼轉換格式8',
  'ASCII': '美國標準資訊交換碼',
  '二进制': '二進位',
  '十六进制': '十六進位',
  '八进制': '八進位',
  '十进制': '十進位',
  '布尔': '布林',
  '整数': '整數',
  '浮点数': '浮點數',
  '双精度': '倍精度',
  '科学计数法': '科學記號',
  '精度': '精確度',
  '舍入': '四捨五入',
  '截断': '截斷',
  '溢出': '溢位',
  '下溢': '下溢位',
  'NaN': '非數值',
  '无穷大': '無限大',
  '零': '零',
  '空': '空值',
  '未定义': '未定義',
  '空值': '空值',
  '未初始化': '未初始化',
  '默认': '預設',
  '可选': '選用',
  '必需': '必要',
  '验证': '驗證',
  '校验': '檢查',

  '格式化': '格式化',
  '解析': '剖析',
  '序列化': '序列化',
  '反序列化': '反序列化',
  '克隆': '複製',
  '深拷贝': '深層複製',
  '浅拷贝': '淺層複製',
  '引用': '參考',
  '指针': '指標',
  '地址': '位址',
  '内存': '記憶體',
  '堆': '堆積',
  '栈': '堆疊',
  '队列': '佇列',
  '链表': '連結串列',
  '树': '樹狀',
  '图': '圖形',
  '哈希表': '雜湊表',
  '集合': '集合',
  '映射': '對應',
  '迭代': '疊代',
  '递归': '遞迴',
  '分治': '分治',
  '动态规划': '動態規劃',
  '贪心': '貪婪',
  '回溯': '回溯',
  '排序': '排序',
  '搜索': '搜尋',
  '查找': '尋找',
  '过滤': '過濾',
  '映射': '對應',
  '归约': '歸納',
  '聚合': '彙總',
  '分组': '分組',
  '连接': '聯結',
  '交集': '交集',
  '并集': '聯集',
  '差集': '差集',
  '补集': '補集',
  '子集': '子集合',
  '超集': '超集合',
  '笛卡尔积': '笛卡爾積',
  '排列': '排列',
  '组合': '組合',
  '概率': '機率',
  '统计': '統計',
  '分布': '分佈',
  '期望': '期望值',
  '方差': '變異數',
  '标准差': '標準差',
  '协方差': '共變異數',
  '相关性': '相關性',
  '回归': '迴歸',
  '分类': '分類',
  '聚类': '分群',
  '降维': '降維',
  '特征': '特徵',
  '模型': '模型',
  '训练': '訓練',
  '测试': '測試',
  '验证': '驗證',
  '过拟合': '過度擬合',
  '欠拟合': '欠擬合',
  '正则化': '正規化',
  '损失函数': '損失函數',
  '优化器': '最佳化器',
  '学习率': '學習率',
  '批次': '批次',
  '轮次': '回合',
  '迭代': '疊代',
  '收敛': '收斂',
  '准确率': '準確率',
  '精确率': '精確率',
  '召回率': '召回率',
  'F1分数': 'F1分數',
  'ROC曲线': 'ROC曲線',
  'AUC': '曲線下面積',
  '混淆矩阵': '混淆矩陣',
  '交叉验证': '交叉驗證',
  'K折': 'K折',
  '留一法': '留一法',
  '自助法': '自助法',
  '集成学习': '集成學習',
  '装袋': '袋裝',
  '提升': '推進',
  '堆叠': '堆疊',
  '随机森林': '隨機森林',
  '梯度提升': '梯度推進',
  'XGBoost': '極限梯度提升',
  'LightGBM': '輕量級梯度提升機',
  'CatBoost': '類別提升',
  '神经网络': '類神經網路',
  '深度学习': '深度學習',
  '卷积神经网络': '卷積神經網路',
  '循环神经网络': '循環神經網路',
  '长短期记忆': '長短期記憶',
  '门控循环单元': '閘控循環單元',
  '自编码器': '自編碼器',
  '生成对抗网络': '生成對抗網路',
  '变分自编码器': '變分自編碼器',
  '强化学习': '強化學習',
  'Q学习': 'Q學習',
  '策略梯度': '策略梯度',
  '演员-评论家': '演員-評論家',
  '深度Q网络': '深度Q網路',
  '蒙特卡洛': '蒙地卡羅',
  '时序差分': '時間差分',
  '探索-利用': '探索-利用',
  '马尔可夫决策过程': '馬可夫決策過程',
  '部分可观测马尔可夫决策过程': '部分可觀測馬可夫決策過程',
  '贝尔曼方程': '貝爾曼方程式',
  '价值函数': '價值函數',
  '策略': '策略',
  '奖励': '獎勵',
  '折扣因子': '折扣因子',
  '状态': '狀態',
  '动作': '動作',
  '观察': '觀察',
  '环境': '環境',
  '智能体': '智能體',
  '模拟器': '模擬器',
  '情节': '情節',
  '步': '步驟',
  '回合': '回合',
  '终止': '終止',
  '收敛': '收斂',
  '策略评估': '策略評估',
  '策略改进': '策略改進',
  '策略迭代': '策略疊代',
  '值迭代': '值疊代',
  '蒙特卡洛控制': '蒙地卡羅控制',
  'SARSA': '狀態-動作-獎勵-狀態-動作',
  'Q学习': 'Q學習',
  '深度Q学习': '深度Q學習',
  '双Q学习': '雙Q學習',
  '优先经验回放': '優先經驗回放',
  '目标网络': '目標網路',
  '策略梯度': '策略梯度',
  'REINFORCE': '增強',
  '演员-评论家': '演員-評論家',
  '优势演员-评论家': '優勢演員-評論家',
  '近端策略优化': '近端策略最佳化',
  '信任域策略优化': '信任域策略最佳化',
  '软演员-评论家': '柔性演員-評論家',
  '双延迟深度确定性策略梯度': '雙延遲深度確定性策略梯度',
  '模仿学习': '模仿學習',
  '逆强化学习': '逆強化學習',
  '生成对抗模仿学习': '生成對抗模仿學習',
  '分层强化学习': '分層強化學習',
  '选项': '選項',
  '内在动机': '內在動機',
  '好奇心': '好奇心',
  '探索': '探索',
  '利用': '利用',
  'ε-贪心': 'ε-貪心',
  '玻尔兹曼探索': '波茲曼探索',
  '上置信界': '上信賴界限',
  '汤普森采样': '湯普森取樣',
  '多臂老虎机': '多臂吃角子老虎機',
  '上下文老虎机': '上下文吃角子老虎機',
  '线性老虎机': '線性吃角子老虎機',
  '对抗性老虎机': '對抗性吃角子老虎機',
  '马尔可夫决策过程': '馬可夫決策過程',
  '部分可观测马尔可夫决策过程': '部分可觀測馬可夫決策過程',
  '马尔可夫链': '馬可夫鏈',
  '隐马尔可夫模型': '隱藏式馬可夫模型',
  '马尔可夫随机场': '馬可夫隨機場',
  '条件随机场': '條件隨機場',
  '马尔可夫逻辑网络': '馬可夫邏輯網路',
  '马尔可夫博弈': '馬可夫博弈',
  '随机博弈': '隨機博弈',
  '纳什均衡': '納許均衡',
  '博弈论': '賽局理論',
  '机制设计': '機制設計',
  '拍卖理论': '拍賣理論',
  '匹配理论': '匹配理論',
  '社会选择': '社會選擇',
  '公平性': '公平性',
  '激励相容': '激勵相容',
  '个体理性': '個體理性',
  '帕累托效率': '柏拉圖效率',
  '社会福利': '社會福利',
  '价格歧视': '價格歧視',
  '网络效应': '網路效應',
  '双边市场': '雙邊市場',
  '平台经济': '平台經濟',
  '共享经济': '共享經濟',
  '零工经济': '零工經濟',
  '区块链': '區塊鏈',
  '加密货币': '加密貨幣',
  '比特币': '比特幣',
  '以太坊': '以太坊',
  '智能合约': '智能合約',
  '去中心化应用': '去中心化應用',
  '去中心化金融': '去中心化金融',
  '非同质化代币': '非同質化代幣',
  '分布式账本': '分散式帳本',
  '共识机制': '共識機制',
  '工作量证明': '工作量證明',
  '权益证明': '權益證明',
  '委托权益证明': '委託權益證明',
  '拜占庭容错': '拜占庭容錯',
  '分片': '分片',
  '侧链': '側鏈',
  '跨链': '跨鏈',
  '原子交换': '原子交換',
  '闪电网络': '閃電網路',
  '状态通道': '狀態通道',
  '零知识证明': '零知識證明',
  '同态加密': '同態加密',
  '安全多方计算': '安全多方計算',
  '可验证随机函数': '可驗證隨機函數',
  '预言机': '預言機',
  '去中心化自治组织': '去中心化自治組織',
  '首次代币发行': '首次代幣發行',
  '证券型代币': '證券型代幣',
  '实用型代币': '實用型代幣',
  '治理代币': '治理代幣',
  '流动性挖矿': '流動性挖礦',
  '收益耕作': '收益耕作',
  '自动做市商': '自動做市商',
  '去中心化交易所': '去中心化交易所',
  '借贷协议': '借貸協議',
  '稳定币': '穩定幣',
  '算法稳定币': '算法穩定幣',
  '超额抵押': '超額抵押',
  '清算': '清算',
  '闪电贷': '閃電貸',
  '合成资产': '合成資產',
  '衍生品': '衍生性商品',
  '期权': '選擇權',
  '期货': '期貨',
  '永续合约': '永續合約',
  '杠杆交易': '槓桿交易',
  '保证金交易': '保證金交易',
  '跨链桥': '跨鏈橋',
  '二层扩容': '第二層擴容',
  'Rollup': '匯總',
  'Optimistic Rollup': '樂觀匯總',
  'ZK-Rollup': '零知識匯總',
  'Validium': '驗證',
  'Plasma': '等離子',
  '状态通道': '狀態通道',
  '侧链': '側鏈',
  '分片': '分片',
  '数据可用性': '資料可用性',
  '数据压缩': '資料壓縮',
  '状态租金': '狀態租金',
  '无状态客户端': '無狀態客戶端',
  '轻节点': '輕節點',
  '全节点': '全節點',
  '存档节点': '存檔節點',
  '验证节点': '驗證節點',
  '共识节点': '共識節點',
  '矿工': '礦工',
  '验证者': '驗證者',
  '委托者': '委託者',
  '质押': '質押',
  '解押': '解除質押',
  '罚没': '罰沒',
  '双签': '雙重簽名',
  '无响应': '無回應',
  '分叉': '分叉',
  '硬分叉': '硬分叉',
  '软分叉': '軟分叉',
  '网络升级': '網路升級',
  '治理': '治理',
  '提案': '提案',
  '投票': '投票',
  '代币经济学': '代幣經濟學',
  '通缩': '通縮',
  '通胀': '通脹',
  '销毁': '銷毀',
  '锁仓': '鎖倉',
  '释放': '釋放',
  '空投': '空投',
  '挖矿': '挖礦',
  '预挖': '預挖',
  '私募': '私募',
  '公募': '公募',
  '初始代币发行': '首次代幣發行',
  '证券型代币发行': '證券型代幣發行',
  '初始交易所发行': '首次交易所發行',
  '初始去中心化交易所发行': '首次去中心化交易所發行',
  '初始流动性发行': '首次流動性發行',
  '初始农场发行': '首次農場發行',
  '初始游戏发行': '首次遊戲發行',
  '初始NFT发行': '首次NFT發行',
  '初始元界发行': '首次元界發行',
  '初始社交发行': '首次社交發行',
  '初始社区发行': '首次社區發行',
  '初始治理发行': '首次治理發行',
  '初始质押发行': '首次質押發行',
  '初始借贷发行': '首次借貸發行',
  '初始合成资产发行': '首次合成資產發行',
  '初始衍生品发行': '首次衍生品發行',
  '初始保险发行': '首次保險發行',
  '初始预测市场发行': '首次預測市場發行',
  '初始数据发行': '首次數據發行',
  '初始存储发行': '首次存儲發行',
  '初始计算发行': '首次計算發行',
  '初始带宽发行': '首次頻寬發行',
  '初始VPN发行': '首次VPN發行',
  '初始CDN发行': '首次CDN發行',
  '初始域名发行': '首次域名發行',
  '初始身份发行': '首次身份發行',
  '初始信誉发行': '首次信譽發行',
  '初始注意力发行': '首次注意力發行',
  '初始内容发行': '首次內容發行',
  '初始社交媒体发行': '首次社交媒體發行',
  '初始游戏道具发行': '首次遊戲道具發行',
  '初始虚拟商品发行': '首次虛擬商品發行',
  '初始数字艺术发行': '首次數字藝術發行',
  '初始音乐发行': '首次音樂發行',
  '初始视频发行': '首次視頻發行',
  '初始电子书发行': '首次電子書發行',
  '初始课程发行': '首次課程發行',
  '初始服务发行': '首次服務發行',
  '初始订阅发行': '首次訂閱發行',
  '初始会员发行': '首次會員發行',
  '初始票务发行': '首次票務發行',
  '初始活动发行': '首次活動發行',
  '初始众筹发行': '首次眾籌發行',
  '初始捐赠发行': '首次捐贈發行',
  '初始奖励发行': '首次獎勵發行',
  '初始积分发行': '首次積分發行',
  '初始优惠券发行': '首次優惠券發行',
  '初始折扣发行': '首次折扣發行',
  '初始礼品卡发行': '首次禮品卡發行',
  '初始代金券发行': '首次代金券發行',
  '初始购物卡发行': '首次購物卡發行',
  '初始预付卡发行': '首次預付卡發行',
  '初始储值卡发行': '首次儲值卡發行',
  '初始信用卡发行': '首次信用卡發行',
  '初始借记卡发行': '首次借記卡發行',
  '初始贷款发行': '首次貸款發行',
  '初始抵押发行': '首次抵押發行',
  '初始质押发行': '首次質押發行',
  '初始保险发行': '首次保險發行',
  '初始养老金发行': '首次養老金發行',
  '初始信托发行': '首次信託發行',
  '初始基金发行': '首次基金發行',
  '初始股票发行': '首次股票發行',
  '初始债券发行': '首次債券發行',
  '初始期货发行': '首次期貨發行',
  '初始期权发行': '首次期權發行',
  '初始互换发行': '首次互換發行',
  // 可根據需要擴充更多詞彙
};

// 轉換函數
function convertToTraditional(message) {
  let result = message;
  for (const [s, t] of Object.entries(s2tMap)) {
    result = result.replace(new RegExp(s, 'g'), t);
  }
  return result;
}

// 獲取所有提交
const commits = execSync('git log --pretty=format:"%H|%s" --reverse').toString().trim().split('\n');

// 處理每個提交
for (const line of commits) {
  const [hash, originalMessage] = line.split('|');
  const newMessage = convertToTraditional(originalMessage);

  if (newMessage !== originalMessage) {
    console.log(`Updating commit ${hash}:`);
    console.log(`  From: ${originalMessage}`);
    console.log(`  To:   ${newMessage}`);

    try {
      // 使用 git filter-branch 修改提交訊息
      execSync(`git filter-branch -f --msg-filter '
        if [ "$GIT_COMMIT" = "${hash}" ]; then
          echo "${newMessage.replace(/'/g, "'\\''")}"
        else
          cat
        fi
      ' --tag-name-filter cat -- --all`, { stdio: 'inherit' });
    } catch (error) {
      console.error(`Error processing commit ${hash}:`, error.message);
      process.exit(1);
    }
  }
}

console.log('轉換完成！');
